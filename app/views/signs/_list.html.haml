.sign-panel
  .sign-panel__status
    .sign-panel__status__count
      현재
      = petition.signs_count
      \/
      목표
      = petition.signs_goal_count

    .progress
      .progress-bar.progress-bar-warning.progress-bar-striped.active{"aria-valuemax" => "100", "aria-valuemin" => "0", "aria-valuenow" => "#{petition.percentage}", :role => "progressbar", :style => "width: #{petition.percentage}%;"}
        #{petition.percentage}%

  .sign-panel__form
    - if user_signed_in? and petition.signed?(current_user)
      .text-center
        서명하였습니다
    - else
      = form_for Sign.new(petition: petition) do |f|
        = f.hidden_field :petition_id
        - unless user_signed_in?
          .row
            .col-xs-12.col-md-6
              .form-group
                = f.label :signer_name
                = f.text_field :signer_name, class: 'form-control'
            .col-xs-12.col-md-6
              .form-group
                = f.label :signer_email
                = f.text_field :signer_email, class: 'form-control'
        .form-group
          = f.text_field :body, placeholder: '서명 한마디..', class: 'form-control'
        .form-group
          = f.submit "#{petition.signs_count+1}번째 서명자 되기", class: 'btn btn-primary btn-sm', data: { disable_with: "진행 중..." }

  .sign-panel__list
    - petition.signs.recent.each do |sign|
      - if sign.user
        %div[sign]
          = link_to sign.user, data: { toggle: 'tooltip' }, title: "#{sign.user_name} - #{raw(screened(sign, :body))}" do
            .img-user{style: "background-image: url(#{sign.user_image_url}); width: 30px; height: 30px;"}
      - else
        %div[sign]
          = link_to '#', data: { toggle: 'tooltip' }, title: "#{sign.user_name} - #{raw(screened(sign, :body))}" do
            .img-user{style: "background-image: url(#{sign.user_image_url}); width: 30px; height: 30px;"}
