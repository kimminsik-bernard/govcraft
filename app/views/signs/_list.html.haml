.sign-panel
  - if petition.signs_goal_count > 0
    .sign-panel__status
      .sign-panel__status__count
        현재
        = petition.signs_count
        \/
        목표
        = petition.signs_goal_count

      .progress
        .progress-bar.progress-bar-warning.progress-bar-striped.active{"aria-valuemax" => "100", "aria-valuemin" => "0", "aria-valuenow" => "#{petition.percentage}", :role => "progressbar", :style => "width: #{petition.percentage}%;"}
          #{petition.percentage}%

  .sign-panel__users
    - petition.signs.recent.each do |sign|
      %span
        = sign.user_name

  .sign-panel__list
    - petition.signs.recent.each do |sign|
      %div
        %span.text-primary= sign.user_name
        = raw(screened(sign, :body))
        %small
          - if current_user != sign.user
            = render 'reports/button', reportable: sign
          - if can? :update, sign
            = link_to '수정', [:edit, sign]
          - if can? :destroy, sign
            = link_to '취소', sign, method: :delete, data: { confirm: '정말 취소하시겠습니까?' }

  - if user_signed_in? and petition.signed?(current_user)
    .text-center.hidden
      참여하였습니다
  - else
    .sign-panel__form
      - if user_signed_in? and petition.signed?(current_user)
      - else
        = form_for Sign.new(petition: petition) do |f|
          = f.hidden_field :petition_id
          - unless user_signed_in?
            .row
              .col-sm-6
                = link_to user_facebook_omniauth_authorize_path(provider: :facebook, redirect_to: petition_path(@petition)), class: 'btn btn-join btn-join-facebook btn-block' do
                  %i.fa.fa-facebook.fa-fw
                  페이스북으로 로그인해서 참여
                = link_to user_twitter_omniauth_authorize_path(provider: :twitter, redirect_to: petition_path(@petition)), class: 'btn btn-join btn-join-twitter btn-block' do
                  %i.fa.fa-twitter.fa-fw
                  트위터로 로그인해서 참여
              .col-sm-1
                혹은
              .col-sm-5
                .form-group
                  = f.text_field :signer_name, placeholder: '이름', class: 'form-control'
                .form-group
                  = f.text_field :signer_email, placeholder: '이메일', class: 'form-control'
          .form-group
            = f.text_field :body, placeholder: '나도 한마디..', class: 'form-control'
          .form-group
            = f.submit "#{petition.signs_count+1}번째로 참가하기", class: 'btn btn-primary btn-sm', data: { disable_with: "진행 중..." }

