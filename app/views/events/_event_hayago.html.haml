%section
  .well
    지도

%section.page-block
  .container
    .row.masonry-container
      .col-sm-6.hidden-xs
        .panel.panel-floating
          .panel-body
            = form_for Comment.new do |f|
              = f.hidden_field :commentable_type, value: 'Event'
              = f.hidden_field :commentable_id, value: @event.id
              - unless user_signed_in?
                .form-group
                  = f.label :commenter_name
                  = f.text_field :commenter_name, class: 'form-control'
                .form-group
                  = f.label :commenter_email
                  = f.text_field :commenter_email, class: 'form-control'
              .form-group
                = f.label :image
                = f.file_field :image, required: true, class: 'form-control'
              .form-group
                ~ f.text_area :body, placeholder: '지금 나는...', required: true, rows: 3, class: 'form-control input-lg'
              = f.submit '작성', class: 'btn btn-primary btn-block'
      - @event.comments.order('id DESC').each do |comment|
        .col-sm-6
          .panel.panel-floating
            .panel-body
              - if comment.image.present?
                .comment__image
                  = image_tag comment.image_url(:lg), style: 'width: 100%;'
              .comment__body
                %h4{ style: 'font-size: 16px; letter-spacing: -0.02em; line-height: 1.4;'}= smart_format comment.body
              .comment__tags
                - comment.tag_list.each do |tag|
                  = link_to "##{tag}", event_path(@event, {tag: tag})
              .comment__meta{ style: 'color: #5f5f5f;font-size: 12px' }
                = comment.user_nickname
                = date_f comment.created_at
                - if can? :destroy, comment
                  = link_to '삭제', comment, method: :delete, data: { confirm: '정말 삭제하시겠습니까?' }
                - if current_user != comment.user
                  = render 'reports/button', reportable: comment
              .comment__like{ style: 'margin-top: 14px;' }
                = render 'likes/button', likable: comment

%section.visible-xs
  %nav.navbar.navbar-default.navbar-fixed-bottom{ style: 'min-height: auto;'}
    %button.btn.btn-primary.btn-lg.btn-block{"data-target" => "#myModal", "data-toggle" => "modal", :type => "button"}
      %i.fa.fa-file-image-o
      사진 올리기

#myModal.modal.fade{:role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} &#215;
        %h4.modal-title 사진과 설명을 남겨주세요
      .modal-body
        = form_for Comment.new do |f|
          = f.hidden_field :commentable_type, value: 'Event'
          = f.hidden_field :commentable_id, value: @event.id
          - unless user_signed_in?
            .form-group
              = f.label :commenter_name
              = f.text_field :commenter_name, class: 'form-control'
            .form-group
              = f.label :commenter_email
              = f.text_field :commenter_email, class: 'form-control'
          .form-group
            = f.label :image
            = f.file_field :image, required: true, class: 'form-control'
          .form-group
            ~ f.text_area :body, placeholder: '지금 나는...', required: true, rows: 3, class: 'form-control input-lg'
          = f.submit '작성', class: 'btn btn-primary btn-block'
